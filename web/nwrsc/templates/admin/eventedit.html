{% extends "admin/bluebase.html" %}

{% block headers %}
{{super()}}
<script>
$(document).ready(function() {
    $("#sessions").prepend("<li><input type='checkbox' id='sessions-on' {{form.sessions.data|length > 0 and "checked='checked'"|safe or ""}}/></li>");

    $("input[name=regopened]").flatpickr( { enableTime: true, minuteIncrement: 30 } );
    $("input[name=regclosed]").flatpickr( { enableTime: true, minuteIncrement: 30 } );

	$("input[name=date]").flatpickr( { onChange: function(dateObj, dateStr) { 
        d = new Date(dateObj[0]); 
        d.setDate(d.getDate() - 2);
        d.setHours(18);
        d.setMinutes(0);
        $("input[name=regclosed]").get(0)._flatpickr.setDate(d);
    }});

    $("input[name=isexternal]").change(function() {
        var elem = $("#eventform > div").slice(6);
        if (this.checked) {
            elem.hide();
        } else {
            elem.show();
        }
        elem.last().show();
    }).trigger("change");

    $("#sessions-on").change(function() {
        var elem = $("#sessions > li");
        if (this.checked) {
            elem.show();
        } else {
            elem.find('input').prop('checked', false);
            elem.hide();
        }
        $(this).parent().show();
    }).trigger("change");
});
</script>

<style>
#sessions {
    margin-bottom: 0;
    padding: 0px;
}
#sessions li {
    display: inline;
}
#sessions label {
    width: auto;
    height: auto;
    vertical-align: middle;
}
#sessions input {
    width: 1.6rem;
    vertical-align: middle;
    margin: 0 0.7rem 0 0.1rem;
}

#sessions-on {
    margin-right: 2rem !important;
    margin-left: 0 !important;
}
</style>
{% endblock headers %}

{% block content %}
{{super()}}
<div class='container'>
<div class='container'>
<h3 class='text-center'>Event Settings</h3>
{{ form.html('eventform', url, 'post', 'btn-admin', 'col-md-4', 'col-md-7') | safe }}
</div>
</div>
{% endblock content %}

